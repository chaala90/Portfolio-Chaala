{"ast":null,"code":"import _toConsumableArray from\"A:/projets developpement/my-portfolio/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"A:/projets developpement/my-portfolio/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import ProjectCard from'../ProjectCard/index';import Select from'../Select/index';import{useData}from'../../containers/context/index';import Modal from'../../containers/Modal/Modal';import ModalProject from'../../containers/ModalProject/index';import'./style.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PER_PAGE=9;var ProjectList=function ProjectList(){var _useData=useData(),data=_useData.data,error=_useData.error;var _useState=useState(),_useState2=_slicedToArray(_useState,2),type=_useState2[0],setType=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var filteredProjects=((!type?data===null||data===void 0?void 0:data.projects:data===null||data===void 0?void 0:data.projects.filter(function(project){return project.type===type;}))||[]).filter(function(project,index){if((currentPage-1)*PER_PAGE<=index&&PER_PAGE*currentPage>index){return true;}return false;});var changeType=function changeType(pType){setCurrentPage(1);setType(pType);};var pageNumber=Math.floor(((filteredProjects===null||filteredProjects===void 0?void 0:filteredProjects.length)||0)/PER_PAGE)+1;var typeList=new Set(data===null||data===void 0?void 0:data.projects.map(function(project){return project.type;}));return/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(\"div\",{children:\"An error occured\"}),data===null?'loading':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Select,{selection:Array.from(typeList),onChange:function onChange(value){return value?changeType(value):changeType(null);}}),/*#__PURE__*/_jsx(\"div\",{id:\"events\",className:\"ListContainer\",children:filteredProjects.map(function(project){return/*#__PURE__*/_jsx(Modal,{Content:/*#__PURE__*/_jsx(ModalProject,{project:project}),children:function children(_ref){var setIsOpened=_ref.setIsOpened;return/*#__PURE__*/_jsx(ProjectCard,{onClick:function onClick(){return setIsOpened(true);},imageSrc:project.cover,title:project.title,link:project.link,date:new Date(project.date),label:project.type});}},project.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"Pagination\",children:_toConsumableArray(Array(pageNumber||0)).map(function(_,n){return/*#__PURE__*/ (// eslint-disable-next-line react/no-array-index-key\n_jsx(\"a\",{href:\"#events\",onClick:function onClick(){return setCurrentPage(n+1);},children:n+1},n));})})]})]});};export default ProjectList;","map":{"version":3,"names":["useState","ProjectCard","Select","useData","Modal","ModalProject","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PER_PAGE","ProjectList","_useData","data","error","_useState","_useState2","_slicedToArray","type","setType","_useState3","_useState4","currentPage","setCurrentPage","filteredProjects","projects","filter","project","index","changeType","pType","pageNumber","Math","floor","length","typeList","Set","map","children","selection","Array","from","onChange","value","id","className","Content","_ref","setIsOpened","onClick","imageSrc","cover","title","link","date","Date","label","_toConsumableArray","_","n","href"],"sources":["A:/projets developpement/my-portfolio/src/components/Events/index.js"],"sourcesContent":["import { useState } from 'react';\r\nimport ProjectCard from '../ProjectCard/index';\r\nimport Select from '../Select/index';\r\nimport { useData } from '../../containers/context/index';\r\nimport Modal from '../../containers/Modal/Modal';\r\nimport ModalProject from '../../containers/ModalProject/index';\r\n\r\nimport './style.scss';\r\n\r\nconst PER_PAGE = 9;\r\n\r\nconst ProjectList = () => {\r\n  const { data, error } = useData();\r\n  const [type, setType] = useState();\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const filteredProjects = (\r\n    (!type\r\n      ? data?.projects\r\n      : data?.projects.filter(project => project.type === type)) || []\r\n  ).filter((project, index) => {\r\n    if (\r\n      (currentPage - 1) * PER_PAGE <= index &&\r\n      PER_PAGE * currentPage > index\r\n    ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  });\r\n  const changeType = pType => {\r\n    setCurrentPage(1);\r\n    setType(pType);\r\n  };\r\n  const pageNumber = Math.floor((filteredProjects?.length || 0) / PER_PAGE) + 1;\r\n  const typeList = new Set(data?.projects.map(project => project.type));\r\n  return (\r\n    <>\r\n      {error && <div>An error occured</div>}\r\n      {data === null ? (\r\n        'loading'\r\n      ) : (\r\n        <>\r\n          <Select\r\n            selection={Array.from(typeList)}\r\n            onChange={value => (value ? changeType(value) : changeType(null))}\r\n          />\r\n          <div id=\"events\" className=\"ListContainer\">\r\n            {filteredProjects.map(project => (\r\n              <Modal\r\n                key={project.id}\r\n                Content={<ModalProject project={project} />}\r\n              >\r\n                {({ setIsOpened }) => (\r\n                  <ProjectCard\r\n                    onClick={() => setIsOpened(true)}\r\n                    imageSrc={project.cover}\r\n                    title={project.title}\r\n                    link={project.link}\r\n                    date={new Date(project.date)}\r\n                    label={project.type}\r\n                  />\r\n                )}\r\n              </Modal>\r\n            ))}\r\n          </div>\r\n          <div className=\"Pagination\">\r\n            {[...Array(pageNumber || 0)].map((_, n) => (\r\n              // eslint-disable-next-line react/no-array-index-key\r\n              <a key={n} href=\"#events\" onClick={() => setCurrentPage(n + 1)}>\r\n                {n + 1}\r\n              </a>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProjectList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}